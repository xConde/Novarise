.reopen-button { position: absolute; top: 20px; right: 20px; padding: 12px 20px; background: rgba(10,5,21,.9); border: 2px solid rgba(106,74,138,.6); border-radius: 8px; color: #e0d0f0; cursor: pointer; backdrop-filter: blur(15px); box-shadow: 0 4px 16px #0008; font-size: 12px; font-weight: 600; z-index: 1000; }
.close-button { position: absolute; top: 8px; right: 8px; width: 32px; height: 32px; background: rgba(106,74,138,.3); border: 2px solid rgba(106,74,138,.5); border-radius: 6px; color: #e0d0f0; font-size: 18px; cursor: pointer; z-index: 10; }
.edit-controls-panel { position: absolute; top: 20px; right: 20px; width: 280px; max-height: calc(100vh - 60px); display: flex; flex-direction: column; background: rgba(10,5,21,.9); border: 1px solid rgba(106,74,138,.6); border-radius: 12px; padding: 16px; backdrop-filter: blur(15px); box-shadow: 0 8px 32px #0008; color: #e0d0f0; z-index: 1000; }
.tab-navigation { display: flex; gap: 6px; margin-bottom: 16px; border-bottom: 1px solid rgba(106,74,138,.3); padding-bottom: 8px; }
.tab-button { flex: 1; padding: 8px 12px; background: rgba(42,26,58,.3); border: 2px solid rgba(106,74,138,.3); border-radius: 6px; color: #9a8ab0; cursor: pointer; font-size: 12px; font-weight: 600;
  &:hover { background: rgba(52,36,68,.5); border-color: rgba(106,74,138,.5); }
  &.active { background: rgba(106,74,138,.4); border-color: #9a8ab0; color: #e0d0f0; box-shadow: 0 0 8px rgba(106,74,138,.3); }
}
.tab-content { flex: 1; overflow-y: auto; overflow-x: hidden; }
.panel-section { margin-bottom: 20px; &:last-child { margin: 0; } }
.section-title { margin: 0 0 10px; font-size: 12px; font-weight: 600; color: #9a8ab0; border-bottom: 1px solid rgba(106,74,138,.3); padding-bottom: 6px; }
.mode-toggle-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 6px; }
.mode-button, .terrain-button-compact, .tool-button, .size-button {
  background: rgba(42,26,58,.5);
  border: 2px solid rgba(106,74,138,.4);
  border-radius: 8px;
  color: #9a8ab0;
  cursor: pointer;
  &:hover { background: rgba(52,36,68,.7); border-color: rgba(106,74,138,.7); }
  &.active { background: rgba(106,74,138,.4); border-color: #9a8ab0; color: #e0d0f0; box-shadow: 0 0 12px rgba(106,74,138,.4); }
}

.mode-button, .terrain-button-compact { display: flex; flex-direction: column; align-items: center; }
.mode-button { padding: 14px 10px; font-size: 12px; &.compact { padding: 10px 8px; } }
.terrain-selector-compact { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; }
.terrain-button-compact { gap: 4px; padding: 8px 6px; font-size: 10px; }
.terrain-preview-compact { width: 24px; height: 24px; border-radius: 4px; box-shadow: 0 1px 4px #0006; .terrain-button-compact.active & { box-shadow: 0 0 10px currentColor; } }
.terrain-label { font-size: 9px; font-weight: 600; }
.tool-toggle, .brush-size-selector { display: grid; gap: 6px; }
.tool-toggle { grid-template-columns: repeat(3, 1fr); }
.brush-size-selector { grid-template-columns: repeat(4, 1fr); }
.tool-button, .size-button { font-size: 11px; font-weight: 600; }
.tool-button { padding: 10px 6px; }
.size-button { padding: 12px 8px; }

.shortcuts-tab { display: flex; flex-direction: column; gap: 12px; }
.shortcut-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px; }
.shortcut-column { background: rgba(42,26,58,.3); border-radius: 6px; padding: 8px 10px; border-left: 2px solid rgba(106,74,138,.5); }
.shortcut-title { font-size: 11px; font-weight: 700; color: #b0a0c0; margin: 0 0 6px; border-bottom: 1px solid rgba(106,74,138,.3); padding-bottom: 3px; }
.shortcut-item { font-size: 10px; color: #9a8ab0; margin: 3px 0 3px 6px; &::before { content: 'â–¸ '; color: #6a4a8a; } }

@media (max-width: 768px) {
  .reopen-button { top: auto; bottom: 56px; bottom: calc(56px + env(safe-area-inset-bottom)); right: 20px; padding: 10px 16px; min-height: 44px; font-size: 11px; }
  .edit-controls-panel { position: fixed; top: auto; bottom: 216px; bottom: calc(216px + env(safe-area-inset-bottom)); left: 50%; transform: translateX(-50%); width: calc(100vw - 40px); max-width: 400px; max-height: calc(100vh - 200px); padding: 12px; }
  .tab-button, .mode-button.compact, .tool-button, .size-button, .terrain-button-compact { min-height: 44px; }
  .terrain-button-compact { padding: 10px 6px; font-size: 10px; }
  .terrain-preview-compact { width: 20px; height: 20px; }
}
